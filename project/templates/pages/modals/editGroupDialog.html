{% load bootstrap3 %}
{% bootstrap_css %}

<!--Uses ajax to send data from dialog with form to the django model-->
<form id="editGroupForm" class="form" role="form" action="{% url 'edit_group' group.course_code %}" method="post">
  <div class="modal-header">
    <button type="button" class="close" name="button" data-dismiss="modal" aria-hidden="true">x</button>
    <h4 class="modal-title" id="editGroupTitle">Edit group {{ group.name }}</h4>
  </div>
  <div class="modal-body">
    {% csrf_token %}
    <div class="fluid-container" style="overflow:hidden">
      <div id="leftSide" class="col-sm-5">
        <div class="form-group">
          <h5>Students without a group</h5>
          <div id="noGroupStudentList" class="listStyle">
            <div id="1" ondblclick="moveStudentDoubleClick(1,1)" onclick="paintDiv(event,1)">1</div>
            <div id="2" ondblclick="moveStudentDoubleClick(2,2)" onclick="paintDiv(event,2)">2</div>
            <div id="3" ondblclick="moveStudentDoubleClick(3,3)" onclick="paintDiv(event,3)">3</div>
          </div>
        </div>
      </div>
      <div id="centerBtns" class="col-sm-2">
        <button id="moveLeftBtn" type="button" name="moveLeft" onclick="moveL()">
          <span class="glyphicon glyphicon-arrow-left"></span>
        </button>
        <button id="moveRightBtn" type="button" name="moveRight" onclick="moveR()">
          <span class="glyphicon glyphicon-arrow-right"></span>
        </button>
      </div>
      <div id="rightSide" class="col-sm-5">
        <div class="form-group">
          <h5>Selected students</h5>
          <div id="studentList" class="listStyle">
            {% for student in group.students %}
            <div id="{{student}}" class="studentItem" ondblclick="moveStudentDoubleClick({{student}}, {{student}})" value="{{ student }}" onclick="paintDiv(event, {{student}})">
              {{ student }}
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    {{ form.non_field_errors }}
    <!--hidden input field for student list. Form sends data from this input.-->
    <div class="form-group" id="formStudents" style="display:none">
      {{form.students}}"
    </div>
  <div class="modal-footer">
    <input type="button" class="btn btn-default" name="cancel" value="cancel" data-dismiss="modal">
    <input type="submit" class="btn btn-primary" name="submit" value="save">
  </div>
  <script>
    var form_options = {
        target: '#editGroupModal',
        success: function() {}
    }
    $('#editGroupForm').ajaxForm(form_options);
  </script>
</form>
